<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EWU-Simulation: Storytelling</title>
    <style>
        :root {
            --eu-blue: #1565c0;
            --eu-bg: #e3f2fd;
            --ind-orange: #ef6c00;
            --ind-bg: #fff3e0;
            --text: #263238;
            --pos: #2e7d32;
            --neg: #c62828;
            --bg: #eceff1;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            line-height: 1.6;
        }

        header { text-align: center; margin-bottom: 30px; }
        h1 { margin: 0; color: var(--eu-blue); font-weight: 800; font-size: 2.2rem; }
        .subtitle { color: #546e7a; font-size: 1.1rem; margin-top: 5px; }

        /* DASHBOARD */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            max-width: 1100px;
            margin-left: auto; margin-right: auto;
        }
        
        .country-card {
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .country-card.euro { background-color: var(--eu-bg); border: 2px solid var(--eu-blue); }
        .country-card.noneuro { background-color: var(--ind-bg); border: 2px solid var(--ind-orange); }
        .country-card.active { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }

        .flag-icon { font-size: 2rem; display: block; margin-bottom: 5px; }

        .metric-container {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 5px 0 15px 0;
            color: #263238;
        }
        .metric-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: #546e7a; font-weight: 700; }
        
        /* BILANZ / HISTORIE (Der Ersatz f√ºr Floating Damage) */
        .history-box {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(0,0,0,0.1);
            font-size: 0.9rem;
            text-align: left;
            flex-grow: 1;
        }
        .history-title { font-size: 0.75rem; text-transform: uppercase; color: #78909c; margin-bottom: 5px; font-weight: bold; }
        .history-entry { display: flex; justify-content: space-between; margin-bottom: 3px; border-bottom: 1px dotted rgba(0,0,0,0.05); }
        .val-pos { color: var(--pos); font-weight: bold; }
        .val-neg { color: var(--neg); font-weight: bold; }

        /* STAGE */
        .stage {
            background: white;
            border-radius: 12px;
            padding: 40px;
            max-width: 950px;
            margin: 0 auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .badge { 
            background: #37474f; color: white; padding: 6px 14px; 
            border-radius: 50px; font-size: 0.85rem; text-transform: uppercase; 
            letter-spacing: 1px; font-weight: 700; display: inline-block; margin-bottom: 15px;
        }
        
        /* STORYTELLING BEREICH */
        .story-section {
            margin-bottom: 25px;
            border-bottom: 2px solid #eceff1;
            padding-bottom: 15px;
        }
        .scenario-title { font-size: 1.8rem; margin: 0 0 10px 0; color: #263238; font-weight: 800; }
        .story-text { font-size: 1.1rem; color: #455a64; line-height: 1.7; }
        
        /* CONFLICT BOX */
        .conflict-box {
            background-color: #fffde7;
            border-left: 6px solid #fbc02d;
            padding: 20px; margin: 10px 0 25px 0; border-radius: 4px;
        }
        .conflict-header { font-weight: 800; color: #f57f17; margin-bottom: 10px; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px; }
        .interest-row { 
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 8px; border-bottom: 1px dashed #f0f4c3; padding-bottom: 5px; 
        }
        .interest-row:last-child { border-bottom: none; }
        .interest-label { font-weight: 700; font-size: 0.95rem; color: #37474f; min-width: 150px; }
        .d-highlight { color: var(--ind-orange); }

        /* ACTIONS */
        .split-actions { display: flex; gap: 30px; margin-top: 10px; flex-wrap: wrap; }
        .col { 
            flex: 1; min-width: 300px; 
            background: #fafafa; padding: 25px; 
            border-radius: 12px; border: 1px solid #cfd8dc; 
            display: flex; flex-direction: column;
        }
        .col.d-col { border-top: 5px solid var(--ind-orange); }
        .col.eu-col { border-top: 5px solid var(--eu-blue); }

        .col-title { font-weight: 800; font-size: 1.1rem; margin-bottom: 20px; display: block; text-align: center; color: #37474f; }

        button {
            width: 100%; padding: 18px; margin-bottom: 12px; border: 1px solid #b0bec5; border-radius: 8px; 
            cursor: pointer; font-size: 1rem; font-weight: 600; transition: all 0.2s; color: white;
            text-align: left; line-height: 1.4; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
        
        .btn-ezb { background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%); border-color: #0d47a1; }
        .btn-nat { background: linear-gradient(135deg, #ef6c00 0%, #e65100 100%); border-color: #e65100; }
        
        button.chosen {
            background: #2e7d32 !important; border-color: #1b5e20 !important; 
            opacity: 1 !important; transform: scale(0.99); box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }
        button:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; box-shadow: none; }
        button small { display: block; font-weight: 400; font-size: 0.85rem; margin-top: 5px; opacity: 0.9; }

        .btn-start { background: #37474f; text-align: center; width: auto; padding: 15px 50px; margin: 0 auto; display: block; }

        /* RESULT */
        .result-box {
            margin-top: 30px; background: #e8f5e9; border-left: 6px solid #2e7d32;
            padding: 30px; display: none; border-radius: 8px;
        }
        .d-result { margin-top: 20px; padding-top: 20px; border-top: 1px solid #a5d6a7; color: #e65100; font-weight: 700; }
        
        /* Animation f√ºr Damage (R√ºtteln der Karte) */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        .shake-damage { animation: shake 0.4s ease-in-out; border-color: var(--neg) !important; }

    </style>
</head>
<body>

    <header>
        <h1>üá™üá∫ EWU-Simulation</h1>
        <div class="subtitle">Interdependenzen & Konsequenzen in der W√§hrungsunion</div>
    </header>

    <div class="dashboard" id="dashboard"></div>

    <div class="stage">
        <div id="game-content">
            <div style="text-align: center; padding: 40px;">
                <h2 style="color:var(--eu-blue)">Willkommen im Amt</h2>
                <p class="story-text">Sie √ºbernehmen die Verantwortung in einer Zeit globaler Umbr√ºche. Sie steuern zwei unterschiedliche Systeme:</p>
                <div style="display:flex; gap:20px; justify-content:center; margin: 30px 0; text-align:left;">
                    <div style="background:var(--eu-bg); padding:20px; border-radius:8px; width:45%; border:1px solid var(--eu-blue);">
                        <strong style="color:var(--eu-blue)">üá™üá∫ Die Eurozone (EWU)</strong><br>
                        Einheitliche Geldpolitik f√ºr heterogene L√§nder. Stabil, aber starr. Regelbr√ºche haben langfristige Folgen.
                    </div>
                    <div style="background:var(--ind-bg); padding:20px; border-radius:8px; width:45%; border:1px solid var(--ind-orange);">
                        <strong style="color:var(--ind-orange)">üü† Der Nationalstaat (Land D)</strong><br>
                        Monet√§re Souver√§nit√§t. Flexibel und schnell, aber schutzlos gegen√ºber globalen M√§rkten.
                    </div>
                </div>
                <button class="btn-start" onclick="startRound(1)">Simulation starten</button>
            </div>
        </div>

        <div class="result-box" id="result-box">
            <h3 style="margin-top:0; color:#2e7d32;">üìã √ñkonomische Auswertung:</h3>
            <div id="result-text"></div>
            <div id="d-result-text" class="d-result"></div>
            <button class="btn-start" style="margin-top:25px; background:#2e7d32" onclick="nextRound()">N√§chstes Szenario &rarr;</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        let countries = [
            { id: 0, name: "Land A", status: "Teil der EWG, Industriefokus", type: "euro", bip: 120, history: [] },
            { id: 1, name: "Land B", status: "Teil der EWG, Tourismusfokus ", type: "euro", bip: 90, history: [] },
            { id: 2, name: "Land D", status: "Nationalstaat", type: "noneuro", bip: 110, history: [] }
        ];

        let round = 0;
        let d_choice = null;
        let eu_choice = null;

        // --- UI FUNCTIONS ---
        function renderDashboard() {
            const d = document.getElementById('dashboard');
            d.innerHTML = "";
            countries.forEach((c, i) => {
                let active = (round > 0 && !(round === 4 && i !== 2)) ? "active" : "";
                let flag = c.type === 'euro' ? 'üá™üá∫' : 'üü†';
                
                // History List generieren
                let historyHTML = "";
                if(c.history.length === 0) historyHTML = "<div style='color:#999; font-style:italic;'>Keine Eintr√§ge</div>";
                
                c.history.forEach(h => {
                    let color = h.val >= 0 ? "val-pos" : "val-neg";
                    let sign = h.val >= 0 ? "+" : "";
                    historyHTML += `<div class="history-entry"><span>${h.name}</span> <span class="${color}">${sign}${h.val}</span></div>`;
                });

                d.innerHTML += `
                    <div class="country-card ${c.type} ${active}" id="card-${i}">
                        <div class="flag-icon">${flag}</div>
                        <strong style="font-size:1.3rem">${c.name}</strong>
                        <span style="font-size:0.9rem; color:#546e7a;">${c.status}</span>
                        
                        <div class="metric-container" id="bip-${i}">${c.bip}</div>
                        <span class="metric-label">BIP-Index</span>
                        
                        <div class="history-box">
                            <div class="history-title">Bilanz</div>
                            ${historyHTML}
                        </div>
                    </div>
                `;
            });
        }

        function updateBIP(index, amount, reason) {
            countries[index].bip += amount;
            // Eintrag in Historie speichern mit Grund
            countries[index].history.push({ r: round, val: amount, name: reason });
            
            // Re-Render Dashboard
            renderDashboard();

            // Wackeln bei Schaden
            if(amount < 0) {
                const card = document.getElementById(`card-${index}`);
                card.classList.add('shake-damage');
                setTimeout(() => card.classList.remove('shake-damage'), 400);
            }
        }

        function renderConflictBox(list) {
            let h = `<div class="conflict-box"><div class="conflict-header">‚ö° Interessenkonflikt</div>`;
            list.forEach(i => {
                let cl = i.highlight ? "d-highlight" : "";
                h += `<div class="interest-row"><span class="interest-label ${cl}">${i.role}:</span> <span class="interest-goal">${i.goal}</span></div>`;
            });
            return h + "</div>";
        }

        // --- SCENARIO LOGIC ---
        function startRound(r) {
            round = r;
            d_choice = null; 
            eu_choice = null;
            renderDashboard();
            const content = document.getElementById('game-content');
            document.getElementById('result-box').style.display = 'none';

            // SZENARIO 1
            if(r === 1) {
                content.innerHTML = `
                    <span class="badge">1. Asymmetrischer Schock</span>
                    <div class="story-section">
                        <h2 class="scenario-title">ü§ñ Der Technologie-Boom</h2>
                        <p class="story-text">
                            Eine Revolution in der K√ºnstlichen Intelligenz (KI) sorgt f√ºr Euphorie an den M√§rkten. Die hochtechnologisierte Industrie in <b>Land A</b> erlebt einen beispiellosen Boom, der die Preise treibt (Inflation > 6%).
                            <br><br>
                            Gleichzeitig k√§mpft <b>Land B</b>, das vom Tourismus abh√§ngt, mit einer Immobilienblase, die gerade platzt. Die Wirtschaft dort steht kurz vor dem Absturz.
                        </p>
                    </div>
                    
                    ${renderConflictBox([
                        { role: "Land A üá©üá™", goal: "Fordert <b>Zinserh√∂hung</b> gegen Inflation." },
                        { role: "Land B üá¨üá∑", goal: "Ben√∂tigt <b>Zinssenkung</b> gegen Rezession." },
                        { role: "Land D üü†", goal: "Kann Zinsen <b>national anpassen</b>.", highlight: true }
                    ])}

                    <div class="split-actions">
                        <div class="col eu-col">
                            <span class="col-title">üá™üá∫ Entscheidung EZB-Rat</span>
                            <button class="btn-ezb" onclick="saveEU(1, 'high', this)">üìà Leitzins stark erh√∂hen (4.5%) <small>Priorit√§t: Preisstabilit√§t in A sichern. Risiko: W√ºrgt Land B ab.</small></button>
                            <button class="btn-ezb" onclick="saveEU(1, 'low', this)">üìâ Leitzins senken (1.0%) <small>Priorit√§t: Rettung von Land B. Risiko: Inflation in A explodiert.</small></button>
                            <button class="btn-ezb" onclick="saveEU(1, 'hold', this)">‚è∏Ô∏è Kompromiss (2.5%) <small>Der Mittelweg. Weder Fisch noch Fleisch.</small></button>
                        </div>
                        <div class="col d-col">
                            <span class="col-title">üü† Zentralbank Land D</span>
                            <button class="btn-nat" onclick="saveD(1, 'perfect', this)">üéØ Zins optimal anpassen <small>Punktgenaue Reaktion auf den nationalen KI-Boom.</small></button>
                            <button class="btn-nat" onclick="saveD(1, 'wait', this)">üé≤ Z√∂gerliches Handeln <small>Politik des Abwartens.</small></button>
                        </div>
                    </div>
                `;
            }

            // SZENARIO 2
            if(r === 2) {
                content.innerHTML = `
                    <span class="badge">2. Fiskalpolitik & Vertrauen</span>
                    <div class="story-section">
                        <h2 class="scenario-title">ü¶† Die Globale Pandemie</h2>
                        <p class="story-text">
                            Ein Virus legt den Welthandel lahm. Lieferketten rei√üen, Fabriken stehen still. Die Steuereinnahmen brechen weg, w√§hrend die Sozialausgaben explodieren.
                            <br><br>
                            Das europ√§ische Regelwerk (Stabilit√§tspakt) verbietet eigentlich neue Rekordschulden. Doch ohne massive Staatshilfen droht <b>Land B</b> der sofortige Kollaps. <b>Land A</b> f√ºrchtet, dass Regelbr√ºche den Euro weich machen.
                        </p>
                    </div>
                    
                    ${renderConflictBox([
                        { role: "EU-Vertr√§ge", goal: "Schuldenbremse einhalten." },
                        { role: "Land A üá©üá™", goal: "F√ºrchtet <b>Glaubw√ºrdigkeitsverlust</b>." },
                        { role: "Land D üü†", goal: "Volle <b>monet√§re Souver√§nit√§t</b>.", highlight: true }
                    ])}

                    <div class="split-actions">
                        <div class="col eu-col">
                            <span class="col-title">üá™üá∫ Euro-Gruppe</span>
                            <button class="btn-ezb" onclick="saveEU(2, 'debt', this)">üí∏ "Whatever it takes" (Hilfspaket) <small>Massive Schuldenaufnahme. Rettet B, aber Land A verliert an Glaubw√ºrdigkeit.</small></button>
                            <button class="btn-ezb" onclick="saveEU(2, 'austerity', this)">‚öñÔ∏è Auf Regeln beharren (Sparen) <small>Keine neuen Schulden. Massive Firmenpleiten in B werden akzeptiert.</small></button>
                        </div>
                        <div class="col d-col">
                            <span class="col-title">üü† Regierung Land D</span>
                            <button class="btn-nat" onclick="saveD(2, 'print', this)">üñ®Ô∏è Monet√§re Finanzierung <small>Zentralbank finanziert Staat direkt. Sofortige Rettung.</small></button>
                            <button class="btn-nat" onclick="saveD(2, 'save', this)">üõ°Ô∏è Budgetdisziplin <small>Keine Hilfen. Tiefe Rezession akzeptieren.</small></button>
                        </div>
                    </div>
                `;
            }

            // SZENARIO 3
            if(r === 3) {
                content.innerHTML = `
                    <span class="badge">3. Externe Schocks</span>
                    <div class="story-section">
                        <h2 class="scenario-title">üìâ Globale Finanzkrise</h2>
                        <p class="story-text">
                            Panik an den Weltb√∂rsen! Internationale Investoren ziehen ihr Kapital massiv aus "kleinen, unsicheren" M√§rkten ab. Es findet eine Flucht in Sicherheit ("Flight to Safety") statt.
                            <br><br>
                            Der Euro profitiert von seinem Status als globale Reservew√§hrung. Die W√§hrung von <b>Land D</b> hingegen ger√§t unter massiven Verkaufsdruck und st√ºrzt ins Bodenlose.
                        </p>
                    </div>

                    ${renderConflictBox([
                        { role: "Euro-Zone üá™üá∫", goal: "Profitiert als <b>sicherer Hafen</b>." },
                        { role: "Land D üü†", goal: "Leidet unter <b>Kapitalflucht</b>.", highlight: true }
                    ])}

                    <div class="split-actions">
                        <div class="col eu-col">
                            <span class="col-title">üá™üá∫ Effekt auf Euro-Raum</span>
                            <button class="btn-ezb" onclick="saveEU(3, 'stable', this)">üõ°Ô∏è Stabilit√§ts-Dividende nutzen <small>Kapitalzufluss senkt Zinsen. Investitionen werden g√ºnstiger.</small></button>
                        </div>
                        <div class="col d-col">
                            <span class="col-title">üü† Dilemma f√ºr Land D</span>
                            <button class="btn-nat" onclick="saveD(3, 'defend', this)">üìà Zins-Notbremse (20%) <small>Stoppt W√§hrungsverfall, aber t√∂tet jede Investition ab.</small></button>
                            <button class="btn-nat" onclick="saveD(3, 'crash', this)">üìâ Absturz zulassen <small>Importe (Energie) werden unbezahlbar. Wohlstandsverlust.</small></button>
                        </div>
                    </div>
                `;
            }

            // SZENARIO 4
            if(r === 4) {
                content.innerHTML = `
                    <span class="badge">4. Das Finale</span>
                    <div class="story-section">
                        <h2 class="scenario-title">Die Richtungsentscheidung</h2>
                        <p class="story-text">
                            <b>Land D</b> zieht Bilanz nach st√ºrmischen Jahren.
                            <br>
                            Im <b>Technologie-Boom (Runde 1)</b> war die nationale Eigenst√§ndigkeit ein Segen. Man konnte ma√ügeschneidert reagieren.
                            <br>
                            Doch in der <b>Finanzkrise (Runde 3)</b> zeigte sich die brutale Verwundbarkeit eines Einzelg√§ngers.
                            <br><br>
                            Die Regierung muss nun entscheiden:
                        </p>
                    </div>
                    
                    <div class="split-actions">
                        <div class="col" style="border: 2px solid #ef6c00; background:#fff3e0; max-width:700px; margin:0 auto;">
                            <span class="col-title" style="color:#ef6c00">Regierungserkl√§rung Land D</span>
                            <button class="btn-nat" onclick="finishGame('join')">üá™üá∫ Antrag auf Euro-Beitritt <small>Schutz vor Spekulation. Aufgabe der Geldpolitik.</small></button>
                            <button class="btn-nat" onclick="finishGame('stay')">üü† Unabh√§ngigkeit bewahren <small>Volle Flexibilit√§t. Risiko weiterer Krisen bleibt.</small></button>
                        </div>
                    </div>
                `;
            }
        }

        // --- LOGIC ---
        function saveEU(r, choice, btn) { 
            eu_choice = choice; 
            disableButtons(btn);
            checkRound(r); 
        }

        function saveD(r, choice, btn) { 
            d_choice = choice; 
            disableButtons(btn);
            checkRound(r); 
        }

        function disableButtons(btn) {
            const col = btn.parentElement;
            for(let b of col.getElementsByTagName('button')) b.disabled = true;
            btn.classList.add('chosen');
            btn.innerHTML += " ‚úÖ";
        }

        function checkRound(r) { 
            if(r === 3 && d_choice && eu_choice) setTimeout(() => resolveRound(r), 700);
            else if(r !== 3 && d_choice && eu_choice) setTimeout(() => resolveRound(r), 700);
        }

        function resolveRound(r) {
            let euText = "";
            let dText = "";

            // SCENARIO 1: AI Boom
            if(r === 1) {
                if(eu_choice === 'high') { 
                    updateBIP(0, 10, "Preisstabilit√§t"); 
                    updateBIP(1, -15, "Kreditklemme"); 
                    euText = "<b>Restriktive Politik:</b> Die Inflation in A ist gestoppt (+10). In B f√ºhren die hohen Zinsen jedoch zu einem Investitionsstopp (-15).";
                } else if (eu_choice === 'low') { 
                    updateBIP(0, -10, "Inflation"); 
                    updateBIP(1, 10, "Liquidit√§t"); 
                    euText = "<b>Expansive Politik:</b> B erh√§lt Luft zum Atmen (+10). In A entwertet die Inflation jedoch L√∂hne und Sparguthaben massiv (-10).";
                } else {
                    updateBIP(0, -5, "Inflation"); 
                    updateBIP(1, -5, "Stagnation");
                    euText = "<b>Kompromiss:</b> Die Zinsen sind zu niedrig f√ºr A (Inflation) und zu hoch f√ºr B (Stagnation). Beide verlieren leicht an Substanz (-5).";
                }

                if(d_choice === 'perfect') { 
                    updateBIP(2, 15, "Boom-Management"); 
                    dText = "<b>Ma√ügeschneidert:</b> Da Land D keine R√ºcksicht auf andere nehmen musste, war die Reaktion optimal. Ein Wirtschaftsboom ist die Folge (+15).";
                } else {
                    updateBIP(2, -5, "Inflation");
                    dText = "<b>Z√∂gerlich:</b> Die Inflation hat sich festgesetzt. Reallohnverlust (-5).";
                }
            }

            // SCENARIO 2: Pandemie & VERTRAUENSVERLUST
            if(r === 2) {
                if(eu_choice === 'austerity') { 
                    updateBIP(1, -20, "Massenpleiten"); 
                    updateBIP(0, -5, "Exportr√ºckgang");
                    euText = "<b>Austerit√§t:</b> Sparen in der Krise wirkte prozyklisch. Die Wirtschaft in B bricht zusammen (-20). Auch A verliert wichtige Absatzm√§rkte (-5).";
                } else { 
                    updateBIP(0, -10, "Vertrauensverlust"); // Vertrauensverlust A
                    updateBIP(1, 10, "Rettung"); // Rettung B
                    euText = "<b>Regelbruch:</b> Die Hilfen retten Land B vor dem Kollaps (+10). <br>Aber: Land A leidet unter <b>Glaubw√ºrdigkeitsverlust</b> der W√§hrung und Haftungsrisiken (-10).";
                }

                if(d_choice === 'print') { 
                    updateBIP(2, 15, "Stimulus"); 
                    dText = "<b>Monet√§re Finanzierung:</b> D nutzt die Notenpresse. Der Staat sichert Arbeitspl√§tze. Die Wirtschaft bleibt intakt (+15), Inflation ist ein Problem von morgen.";
                } else {
                    updateBIP(2, -10, "Rezession");
                    dText = "<b>Konsolidierung:</b> Ohne Staatshilfen bricht die Inlandsnachfrage ein (-10).";
                }
            }

            // SCENARIO 3: Finanzkrise
            if(r === 3) {
                updateBIP(0, 5, "Safe Haven"); 
                updateBIP(1, 5, "Safe Haven");
                euText = "<b>Sicherer Hafen:</b> Kapitalzufluss in den Euro-Raum senkt die Finanzierungskosten (+5 f√ºr alle).";

                if(d_choice === 'defend') { 
                    updateBIP(2, -20, "Invest-Stopp"); 
                    dText = "<b>Zinsschock:</b> Der Zins wurde auf 20% erh√∂ht. Die W√§hrung ist stabil, aber Investitionen sind unm√∂glich. Rezession (-20).";
                } else { 
                    updateBIP(2, -20, "Kaufkraftverlust"); 
                    dText = "<b>W√§hrungskrise:</b> Der Au√üenwert der W√§hrung kollabiert. Importe werden unbezahlbar. Massiver Wohlstandsverlust (-20).";
                }
            }

            document.getElementById('game-content').innerHTML = "<h3 style='text-align:center; padding:30px; color:#34495e'>Analysiere Marktdaten...</h3>";
            document.getElementById('result-text').innerHTML = "<b>üá™üá∫ Euro-Zone:</b> " + euText;
            document.getElementById('d-result-text').innerHTML = "<b>üü† Land D (National):</b> " + dText;
            document.getElementById('result-box').style.display = 'block';
        }

        function nextRound() {
            if (round < 4) startRound(round + 1);
            else location.reload();
        }

        function finishGame(choice) {
            let finalMsg = choice === 'join' 
                ? "Land D w√§hlt die <b>Stabilit√§t</b>. Der Beitritt eliminiert das Risiko spekulativer Attacken (+10 BIP Vertrauensbonus), bedeutet aber den Verlust der geldpolitischen Eigenst√§ndigkeit." 
                : "Land D bleibt <b>unabh√§ngig</b>. Es beh√§lt die volle Flexibilit√§t f√ºr nationale Krisen, bleibt aber den St√ºrmen der globalen Finanzm√§rkte schutzlos ausgeliefert.";

            if(choice === 'join') updateBIP(2, 10, "Vertrauensbonus");

            let winner = countries.reduce((prev, curr) => (prev.bip > curr.bip) ? prev : curr);
            
            document.getElementById('game-content').innerHTML = `
                <div style="text-align:center; padding:30px;">
                    <h2 style="color:#2c3e50">Endergebnis</h2>
                    <p style="font-size:1.3rem; color:#27ae60; font-weight:700;">üèÜ Wirtschaftssieger: ${winner.name}</p>
                    <div style="background:#f1f8e9; padding:20px; border-radius:8px; text-align:left; margin:20px auto; max-width:600px; border-left: 5px solid #27ae60;">
                        <strong style="color:#2e7d32">Fazit:</strong>
                        <p>${finalMsg}</p>
                    </div>
                    <button class="btn-start" onclick="location.reload()">Neustart</button>
                </div>`;
            document.getElementById('result-box').style.display = 'none';
        }

        renderDashboard();
    </script>
</body>
</html>